generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

enum Role {
  Admin
  Teacher
  Student
}

model Assignment {
  id          Int      @id @default(autoincrement())
  subject     String 
  ageGroup    String
  assignments String

  teachers    Teacher[] @relation("TeacherAssignments")
  students    Student[] @relation("StudentAssignments")
}

model Teacher {
  id              Int        @id @default(autoincrement())
  name            String
  subjectTeacher  String
  hourlyRate      Int
  email           String    @unique
  numberOfStudents Int
  rating          Int
  password        String
  role            Role
  tokens          Token[]

  assignmentId    Int
  Assignment Assignment[] @relation("TeacherAssignments")
}

model Student {
  id              Int        @id @default(autoincrement())
  name            String
  email           String    @unique
  ageGroup        String
  password        String
  role            Role
  tokens          Token[]

  assignmentId    Int 
  Assignment Assignment[] @relation("StudentAssignments")
}

model Token {
  token String @id
  teacher Teacher @relation(fields: [teacherId], references: [id], onDelete: Cascade)
  student Student @relation(fields: [studentId], references: [id], onDelete: Cascade)
  teacherId Int
  studentId Int
}